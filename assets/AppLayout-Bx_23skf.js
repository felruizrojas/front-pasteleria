import{u as N,j as e,L as x,r as f,v as D,N as y,a as P,O as F}from"./index-CqkjqQ36.js";import{l as B}from"./logo_tienda-CU7G0dT7.js";import{I,B as h,c as g}from"./Input-Bel9z8HH.js";import{u as A}from"./useAuth-Ce2KblCh.js";const _=[{title:"Secciones",links:[{label:"Inicio",to:"/"},{label:"Nosotros",to:"/about"},{label:"Blog",to:"/blog"}]}],z=[{label:"Carta",to:"/menu"},{label:"Carrito",to:"/cart"}],$=["Lunes a sábado","10:00–19:00 hrs"],q=()=>{const a=N(),t=new Date().getFullYear(),n=l=>{typeof window>"u"||a.pathname==="/"&&(l.preventDefault(),window.scrollTo({top:0,left:0,behavior:"smooth"}))},r=({label:l,to:s,external:i})=>i?e.jsx("a",{href:s,className:"nav-link p-0 link-body-emphasis",target:"_blank",rel:"noreferrer",children:l}):e.jsx(x,{to:s,className:"nav-link p-0 link-body-emphasis",onClick:o=>{typeof window>"u"||s==="/"&&a.pathname==="/"&&(o.preventDefault(),window.scrollTo({top:0,left:0,behavior:"smooth"}))},children:l});return e.jsx("footer",{className:"site-footer border-top mt-5",children:e.jsxs("div",{className:"container-fluid py-5 px-4 px-lg-5",children:[e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-12 col-lg-5",children:[e.jsxs(x,{to:"/",className:"d-flex align-items-center w-100 mb-3 text-decoration-none link-body-emphasis",onClick:n,children:[e.jsx("img",{src:B,alt:"Pastelería Mil Sabores",width:60,className:"rounded-pill me-2 flex-shrink-0"}),e.jsx("span",{className:"fs-5 fw-semibold text-truncate brand-name",children:"Pastelería Mil Sabores"})]}),e.jsx("p",{className:"mb-0",children:"Celebra la dulzura de la vida con Pastelería Mil Sabores."}),e.jsxs("div",{className:"d-flex align-items-center gap-3 mt-3",children:[e.jsx("a",{href:"https://maps.app.goo.gl/LA3bMz4KLmiopUho9",className:"fs-4 link-body-emphasis","aria-label":"Dirección",target:"_blank",rel:"noreferrer",children:e.jsx("i",{className:"bi bi-geo-alt-fill","aria-hidden":!0})}),e.jsx("a",{href:"mailto:pasteleria.1000sabores@gmail.com",className:"fs-4 link-body-emphasis","aria-label":"Correo",children:e.jsx("i",{className:"bi bi-envelope-fill","aria-hidden":!0})}),e.jsx("a",{href:"tel:+56912345678",className:"fs-4 link-body-emphasis","aria-label":"Teléfono",children:e.jsx("i",{className:"bi bi-telephone-fill","aria-hidden":!0})}),e.jsx("a",{href:"https://www.instagram.com/pasteleria1000sabores",className:"fs-4 link-body-emphasis","aria-label":"Instagram",target:"_blank",rel:"noreferrer",children:e.jsx("i",{className:"bi bi-instagram","aria-hidden":!0})})]})]}),e.jsx("div",{className:"col-12 col-lg-7",children:e.jsxs("div",{className:"row g-4 g-lg-3 row-cols-1 row-cols-md-3",children:[_.map(l=>e.jsxs("div",{className:"col",children:[e.jsx("h6",{className:"fw-bold text-uppercase small",children:l.title}),e.jsx("ul",{className:"nav flex-column",children:l.links.map(s=>e.jsx("li",{className:"nav-item mb-2",children:r(s)},s.label))})]},l.title)),e.jsxs("div",{className:"col",children:[e.jsx("h6",{className:"fw-bold text-uppercase small",children:"Compra"}),e.jsx("ul",{className:"nav flex-column",children:z.map(l=>e.jsx("li",{className:"nav-item mb-2",children:r(l)},l.label))})]}),e.jsxs("div",{className:"col",children:[e.jsx("h6",{className:"fw-bold text-uppercase small",children:"Horario"}),e.jsx("div",{className:"d-flex flex-column gap-1",children:$.map(l=>e.jsx("span",{className:"mb-0",children:l},l))})]})]})})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-center gap-3",children:[e.jsxs("small",{children:["© ",t," Pastelería Mil Sabores. Todos los derechos reservados."]}),e.jsxs("ul",{className:"nav",children:[e.jsx("li",{className:"nav-item",children:e.jsx(x,{to:"/privacy",className:"nav-link px-2 link-body-emphasis",children:"Privacidad"})}),e.jsx("li",{className:"nav-item",children:e.jsx(x,{to:"/terms",className:"nav-link px-2 link-body-emphasis",children:"Términos"})})]})]})]})})},H=()=>typeof window>"u"?null:window.bootstrap??null,O=a=>{const t=H();return!a||!t?null:t.Offcanvas?.getInstance?.(a)??t.Offcanvas?.getOrCreateInstance?.(a)??null},R=a=>{const t=typeof document<"u"?document.getElementById(a):null;O(t)?.show?.()},T=a=>{const t=typeof document<"u"?document.getElementById(a):null,n=O(t);n?n.hide?.():t&&(t.classList.remove("show"),t.setAttribute("aria-hidden","true"),t.style&&(t.style.visibility="hidden")),typeof document<"u"&&document.querySelectorAll(".offcanvas-backdrop").forEach(r=>{r instanceof HTMLElement&&(r.classList.remove("show"),r.remove())}),typeof document<"u"&&(document.body.classList.remove("offcanvas-open"),document.body.style.removeProperty("overflow"),document.body.removeAttribute("data-bs-overflow"),document.body.removeAttribute("data-bs-padding-right"))},Y=()=>{const{login:a,loading:t}=A(),[n,r]=f.useState({email:"",password:""}),[l,s]=f.useState({}),[i,o]=f.useState({}),[m,j]=f.useState(null),L=f.useCallback(()=>{T("offcanvasLogin")},[]),w=f.useCallback((b,d)=>{const u=D(b,{requireExistingEmail:!0}),c={};return Object.keys(d).forEach(p=>{if(!d[p])return;const v=u.errors[p];v&&(c[p]=v)}),s(c),u},[s]),C=b=>{const{name:d,value:u}=b.currentTarget,c=d,p={...n,[c]:u},v={...i,[c]:!0};w(p,v),r(p),o(v),j(null)},k=b=>{const{name:d}=b.currentTarget;if(!d)return;const c={...i,[d]:!0};w(n,c),o(c)},V=async b=>{b.preventDefault();const d={email:!0,password:!0},u=w(n,d);if(o(d),!!u.isValid)try{await a(n),T("offcanvasLogin"),r({email:"",password:""}),s({}),o({}),j(null)}catch(c){c instanceof Error?j(c.message):j("No fue posible iniciar sesión. Inténtalo nuevamente.")}};return e.jsxs("div",{className:"offcanvas offcanvas-end login-panel",tabIndex:-1,id:"offcanvasLogin","aria-labelledby":"offcanvasLoginLabel","data-bs-backdrop":"true","data-bs-scroll":"false",children:[e.jsxs("div",{className:"offcanvas-header",children:[e.jsxs("h5",{className:"offcanvas-title",id:"offcanvasLoginLabel",children:[e.jsx("i",{className:"bi bi-person me-2","aria-hidden":!0})," Iniciar sesion"]}),e.jsx("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Cerrar"})]}),e.jsx("div",{className:"offcanvas-body",children:e.jsxs("form",{onSubmit:V,noValidate:!0,children:[m?e.jsx("div",{className:"alert alert-danger",role:"alert",children:m}):null,e.jsx(I,{label:"Correo electronico",type:"email",id:"loginEmail",name:"email",placeholder:"tucorreo@dominio.com",value:n.email,onChange:C,onBlur:k,errorText:l.email,containerClassName:"mb-3"}),e.jsx(I,{label:"Contrasena",type:"password",id:"loginPassword",name:"password",placeholder:"••••",value:n.password,onChange:C,autoComplete:"current-password",onBlur:k,errorText:l.password,containerClassName:"mb-3"}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:"rememberMe"}),e.jsx("label",{className:"form-check-label",htmlFor:"rememberMe",children:"Recordarme"})]}),e.jsx(x,{to:"/reset-password",className:"link-body-emphasis",onClick:L,children:"Olvidaste tu contrasena?"})]}),e.jsx(h,{type:"submit",block:!0,className:"mb-2",variant:"strawberry",disabled:t,children:t?"Ingresando...":"Ingresar"}),e.jsx("hr",{className:"my-4"}),e.jsxs("p",{className:"mb-0 text-center",children:["No tienes cuenta?",e.jsx(x,{to:"/register",className:"ms-1 link-body-emphasis",onClick:L,children:"Crear cuenta"})]})]})})]})},E=(a,t,n,r)=>{const l=a.to,s=`${a.label}-${t}`;if("external"in a&&!!a.external)return e.jsx(h,{as:"a",href:l,target:"_blank",rel:"noreferrer",block:!0,variant:"strawberry",onClick:()=>r(),children:a.label},s);const o=l==="/"?n===l:n.startsWith(l);return e.jsx(h,{as:"link",to:l,block:!0,className:o?"active":void 0,variant:"strawberry",onClick:m=>{l==="/"&&n==="/"&&typeof window<"u"&&(m.preventDefault(),window.scrollTo({top:0,left:0,behavior:"smooth"})),r()},children:a.label},s)},K=({primaryLinks:a,secondaryLinks:t,currentPath:n,onNavigate:r,authAction:l})=>e.jsx("div",{className:"d-lg-none w-100",children:e.jsxs("div",{className:"d-grid gap-2 mt-3",children:[a.map((s,i)=>E(s,i,n,r)),t.map((s,i)=>E(s,i+a.length,n,r)),l.type==="login"?e.jsx(h,{type:"button",block:!0,"data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasLogin",variant:"strawberry",onClick:r,children:l.label}):e.jsxs(h,{as:"link",to:l.to,block:!0,variant:"strawberry",onClick:r,className:"d-flex align-items-center justify-content-center gap-2",title:"Ver mi perfil","aria-label":"Ver mi perfil",children:[e.jsx("i",{className:"bi bi-person-circle","aria-hidden":!0}),e.jsx("span",{children:l.label})]})]})}),S=[{label:"Inicio",to:"/",icon:"bi-house-door",ariaLabel:"Inicio"},{label:"Nosotros",to:"/about"},{label:"Carta",to:"/menu"},{label:"Blog",to:"/blog"},{label:"Contacto",to:"/contact"}],M=[{label:"Instagram",to:"https://www.instagram.com/pasteleria1000sabores",icon:"bi-instagram",ariaLabel:"Instagram",external:!0},{label:"Carrito",to:"/cart",icon:"bi-cart3",ariaLabel:"Carrito"}],U=(a,t)=>e.jsxs(y,{to:a.to,className:({isActive:n})=>g("nav-link",{active:n&&!a.icon}),"aria-label":a.ariaLabel,end:a.to==="/",onClick:n=>{a.to==="/"&&t==="/"&&typeof window<"u"&&(n.preventDefault(),window.scrollTo({top:0,left:0,behavior:"smooth"}))},children:[a.icon?e.jsx("i",{className:g("bi",a.icon,"fs-5"),"aria-hidden":!0}):a.label,a.icon?e.jsx("span",{className:"visually-hidden",children:a.label}):null]},a.label),W=()=>{const{pathname:a}=N(),{isAuthenticated:t,user:n}=A(),r=(()=>{if(!n)return"Mi perfil";const s=[n.firstName,n.lastName].filter(Boolean);return(s.length>0?s.join(" "):n.name).trim()||"Mi perfil"})(),l=()=>{if(typeof window>"u")return;const s=document.getElementById("mainNav");if(!s)return;const o=window.bootstrap?.Collapse?.getInstance(s);o?.hide(),o||s.classList.remove("show");const m=document.querySelector('[data-bs-target="#mainNav"]');m&&(m.classList.add("collapsed"),m.setAttribute("aria-expanded","false"))};return e.jsx("nav",{className:"navbar navbar-expand-lg navbar-light bg-white sticky-top primary-nav shadow-sm",children:e.jsxs("div",{className:"container-fluid",children:[e.jsxs(y,{className:"navbar-brand d-flex align-items-center",to:"/",state:{from:a},onClick:s=>{typeof window>"u"||a==="/"&&(s.preventDefault(),window.scrollTo({top:0,left:0,behavior:"smooth"}))},children:[e.jsx("img",{src:B,alt:"Pastelería Mil Sabores",width:80,className:"rounded-pill me-2 logo"}),e.jsx("span",{className:"ms-2 fw-semibold d-none d-lg-inline brand-name",children:"Pastelería Mil Sabores"})]}),e.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#mainNav","aria-controls":"mainNav","aria-expanded":"false","aria-label":"Alternar navegacion",children:e.jsx("span",{className:"navbar-toggler-icon"})}),e.jsxs("div",{className:"collapse navbar-collapse",id:"mainNav",children:[e.jsx("ul",{className:"navbar-nav mx-auto d-none d-lg-flex",children:S.map(s=>e.jsx("li",{className:"nav-item",children:U(s,a)},s.label))}),e.jsxs("ul",{className:"navbar-nav ms-auto align-items-lg-center gap-2 d-none d-lg-flex",children:[M.map(s=>e.jsx("li",{className:"nav-item",children:s.external?e.jsxs("a",{className:"nav-link",href:s.to,target:"_blank",rel:"noreferrer","aria-label":s.ariaLabel,children:[e.jsx("i",{className:g("bi",s.icon,"fs-5"),"aria-hidden":!0}),e.jsx("span",{className:"visually-hidden",children:s.label})]}):e.jsxs(y,{to:s.to,className:({isActive:i})=>g("nav-link",{active:i}),"aria-label":s.ariaLabel,children:[e.jsx("i",{className:g("bi",s.icon,"fs-5"),"aria-hidden":!0}),e.jsx("span",{className:"visually-hidden",children:s.label})]})},s.label)),e.jsx("li",{className:"nav-item ms-2",children:t?e.jsxs(h,{as:"link",to:"/profile",size:"sm",variant:"mint",className:"d-flex align-items-center gap-2 px-3 text-truncate",title:"Ver mi perfil","aria-label":"Ver mi perfil",children:[e.jsx("i",{className:"bi bi-person-circle","aria-hidden":!0}),e.jsx("span",{className:"text-truncate",children:r})]}):e.jsx(h,{type:"button",size:"sm","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasLogin",variant:"strawberry",children:"Iniciar sesión"})})]}),e.jsx(K,{primaryLinks:S,secondaryLinks:M,currentPath:a,onNavigate:l,authAction:t?{type:"profile",label:r,to:"/profile"}:{type:"login",label:"Iniciar sesión"}})]})]})})},G=()=>{const{pathname:a,search:t}=N();return f.useEffect(()=>{typeof window>"u"||window.scrollTo({top:0,left:0})},[a,t]),null},ee=()=>{const a=N(),t=P();return f.useEffect(()=>{const n=a.state;if(!n||typeof n!="object")return;const r=n;if(!r.openLogin)return;typeof window<"u"&&window.scrollTo({top:0,left:0}),R("offcanvasLogin");const l={...r};delete l.openLogin,t(`${a.pathname}${a.search}`,{replace:!0,state:Object.keys(l).length>0?l:void 0})},[a,t]),e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsx(W,{}),e.jsx(Y,{}),e.jsx("div",{className:"app-shell",children:e.jsx("main",{className:"flex-grow-1",children:e.jsx(F,{})})}),e.jsx(q,{})]})};export{ee as default};
